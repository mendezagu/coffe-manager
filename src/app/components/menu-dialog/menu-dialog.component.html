<div class="flex flex-col h-full max-h-[75vh] bg-white rounded-2xl overflow-hidden shadow-2xl">
  <!-- Header con diseño Fuse -->
  <div class="flex-shrink-0 px-4 sm:px-5 py-3 sm:py-4 bg-gradient-to-r from-coffee-600 via-coffee-700 to-coffee-600 relative overflow-hidden">
    <!-- Patrón decorativo de fondo -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-0 right-0 w-64 h-64 bg-white rounded-full -translate-y-32 translate-x-32"></div>
      <div class="absolute bottom-0 left-0 w-48 h-48 bg-white rounded-full translate-y-24 -translate-x-24"></div>
    </div>
    
    <div class="relative flex items-center justify-between">
      <div class="flex items-center gap-2.5">
        <div class="flex items-center justify-center w-10 h-10 rounded-xl bg-white/20 backdrop-blur-sm">
          <mat-icon class="!w-6 !h-6 !text-2xl text-white">restaurant_menu</mat-icon>
        </div>
        <div>
          <h2 class="text-lg sm:text-xl font-bold text-white m-0">Selecciona Menús</h2>
          <p class="text-white/80 text-xs mt-0.5">Agrega items a tu orden</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Contenido principal -->
  <div class="flex-1 overflow-y-auto px-4 sm:px-5 py-3 sm:py-4 bg-gray-50">
    <!-- Ítems seleccionados -->
    <div *ngIf="selectedItems.length > 0" class="mb-3 relative">
      <div class="bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-3 shadow-lg">
        <!-- Header del carrito -->
        <div class="flex items-center justify-between mb-2.5">
          <div class="flex items-center gap-2">
          
       
          </div>
        
        </div>
        
        <!-- Lista de items seleccionados -->
        <div class="max-h-24 overflow-y-auto custom-scrollbar">
          <div class="flex flex-wrap gap-1">
            <div 
              *ngFor="let item of selectedItems" 
              class="group flex items-center gap-1 px-2 py-0.5 bg-white rounded shadow-sm hover:shadow-md transition-all duration-300 border border-purple-100"
            >
              <small class="text-xs font-semibold text-gray-900">{{ item.name }}</small>
              <div class="flex items-center gap-1">
                <span class="flex items-center justify-center min-w-[20px] h-5 px-1 bg-gradient-to-r from-yellow-400 to-amber-400 text-coffee-900 text-xs font-bold rounded">
                  x{{ item.quantity }}
                </span>
                <button 
                  class="flex items-center justify-center w-5 h-5 rounded bg-red-100 hover:bg-red-200 text-red-600 transition-colors opacity-0 group-hover:opacity-100" 
                  (click)="removeSelectedItem(item)"
                  aria-label="Eliminar"
                >
                  <mat-icon class="!w-3 !h-3 !text-xs">close</mat-icon>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Campo de búsqueda -->
    <div class="mb-3 relative">
      <div class="relative">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <mat-icon class="!w-5 !h-5 !text-xl text-gray-400">search</mat-icon>
        </div>
        <input
          type="text"
          class="w-full pl-10 pr-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-transparent transition-all placeholder-gray-400 shadow-sm"
          placeholder="Buscar menú..."
          [(ngModel)]="filterText"
        />
      </div>
    </div>

    <!-- Grid de items del menú -->
    <div class="space-y-2 max-h-[45vh] overflow-y-auto custom-scrollbar pr-2">
      <div
        *ngFor="let menu of filteredMenuItems"
        class="group bg-white rounded-lg shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-coffee-300"
      >
        <div class="p-2.5 sm:p-3">
          <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2">
            <!-- Info del producto -->
            <div class="flex-1 min-w-0">
              <small class=" font-semibold text-gray-900 mb-1">{{ menu.name }}</small>
              <div class="flex items-center gap-1">
                <small class="font-semibold text-green-600">{{ menu.price }}</small>
              </div>
            </div>

            <!-- Controles -->
            <div class="flex items-center gap-1.5 w-full sm:w-auto">
              <!-- Control de cantidad -->
              <div class="flex items-center gap-1 bg-gray-50 rounded px-1.5 py-1 border-2 border-gray-200">
                <input
                  class="w-12 px-1 py-0.5 bg-white border-2 border-gray-200 rounded text-center text-xs font-bold focus:outline-none focus:ring-2 focus:ring-coffee-500"
                  type="number"
                  min="1"
                  [value]="menu.quantity"
                  (input)="updateQuantity(menu, $event)"
                />
              </div>

              <!-- Botón Agregar -->
              <button
                class="flex items-center justify-center gap-1 px-3 py-1.5 rounded text-xs font-bold transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg"
                [ngClass]="addedItems[menu._id] ? 
                  'bg-gradient-to-r from-coffee-600 to-coffee-700 text-white' : 
                  'bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700'"
                (click)="addItem(menu)"
              >
                <mat-icon class="!w-3.5 !h-3.5 !text-base" *ngIf="!addedItems[menu._id]">add_circle</mat-icon>
                <mat-icon class="!w-3.5 !h-3.5 !text-base" *ngIf="addedItems[menu._id]">check_circle</mat-icon>
                <span class="hidden sm:inline">{{ addedItems[menu._id] ? "Agregado" : "Agregar" }}</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer con acciones -->
  <div class="flex-shrink-0 flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-2 px-3 sm:px-4 py-3 bg-white border-t-2 border-gray-100 shadow-lg">
    <button 
      class="flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-bold bg-gray-100 hover:bg-gray-200 text-gray-700 transition-all duration-300 shadow-md hover:shadow-lg" 
      (click)="cancel()">
      <mat-icon class="!w-4 !h-4 !text-lg">cancel</mat-icon> 
      <span>Cancelar</span>
    </button>

<button
  class="flex items-center justify-center gap-1 px-4 py-1.5 rounded-lg text-sm font-bold
         bg-gradient-to-r from-green-600 to-emerald-600
         hover:from-green-700 hover:to-emerald-700
         text-white transition-all duration-300
         transform hover:scale-105
         shadow-lg hover:shadow-xl
         disabled:opacity-50 disabled:cursor-not-allowed
         disabled:transform-none disabled:shadow-md"
  (click)="printTicket()"
  [disabled]="selectedItems.length === 0 || !canPrint"
>
  <mat-icon class="!w-4 !h-4 !text-base">print</mat-icon>
  <span>Imprimir Comanda</span>
</button>

  </div>
</div>

<style>
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #6f4e37 0%, #8b6f47 100%);
    border-radius: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #5a3e2b 0%, #6f4e37 100%);
  }
</style>